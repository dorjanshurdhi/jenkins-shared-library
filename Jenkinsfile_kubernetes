@Library('jenkins-shared-library') _

pipeline{
    agent {
        node {
            label 'master'
        }
    }
    stages{
        stage('Test Shared Libs'){
            steps{
                script {
                    def configMap = [
                       'kubernetes-partner-name':${params.kubernetesPartnerName},
                       'serverUrl': ${params.serverUrle},
                       'namespace': ${params.namespacee},
                       'credentialsId': ${params.credentialsIde},
                       'useJenkinsProxy': ${params.useJenkinsProxye},
                       'disableHTTPCertificateCheck': ${params.disableHTTPCertificateChecke},
                       'jenkinsURL': ${params.jenkinsURLe},
                       'jenkinsTunnel': ${params.jenkinsTunnele},
                       'connectionTimeout': ${params.connectionTimeoute},
                       'readTimeout': ${params.readTimeoute},
                       'concurrencyLimit': ${params.concurrencyLimite},
                       'podLabels': ['jenkins': 'agent', 'owner': 'partner-3'],
                       'podTemplate': [
                           'label': 'kubeagent',
                           'name': 'kube-agent',
                           'namespace': 'devops-tools'
                        ]
                    ]
                    kubernetes(configMap)                
                }
            }
        }
    }
}